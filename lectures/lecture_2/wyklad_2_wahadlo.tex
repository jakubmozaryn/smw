\documentclass[10pt, brown]{beamer}
\usetheme{Warsaw}
\usepackage[MeX]{polski}
\usepackage[cp1250]{inputenc}  % Polskie literki...
\usepackage[polish]{babel}     %
\usepackage{parskip}
\usepackage{latexsym,gensymb,amsmath,amssymb,amsthm}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{ragged2e}
\usepackage{url}
%\setlength{\parindent}{0pt}
%\setlength{\parskip}{1ex}
\renewcommand{\qedsymbol}{$\square$}
\newenvironment{dowod}{{\bf Dowód.}}{\hfill\rule[0.025cm]{0.21cm}{0.21cm}}
\newtheorem{tw}{Twierdzenie}
\newtheorem{fakt}{Fakt}
\newtheorem{lemat}{Lemat}
\newtheorem{wn}{Wniosek}

\author{dr in¿. Jakub Mo¿aryn, mgr in¿. Jan Klimaszewski}
\institute{Instytut Automatyki i Robotyki}
\date{Warszawa, 2018}
\title{Sterowanie mechanizmów wielocz³onowych}
\subtitle{Wyk³ad 2 - standardowe modele uk³adów wielocz³onowych}
\begin{document}
%
\frame{
\titlepage
}
%
\section{Wahad³o odwrócone (K)}
%
\frame{
	\frametitle{Wahad³o odwrócone - Opis 1/2}
	\justify
	Wahad³o odwrócone sk³ada siê z prêta swobodnie przymocowanego do wózka je¿d¿¹cego po prowadnicy. Ruch wózkiem pozwala na realizacjê przemieszczenia liniowego wahad³a, natomiast ruch k¹towy prêta jest wynikiem dzia³ania si³ bezw³adnoœci. Wahad³o posiada punkt stabilnoœci w dolnym po³o¿eniu prêta oraz punkt chwiejnej równowagi w pozycji górnej. W momencie gdy uk³ad jest utrzymywany w górnej pozycji, mówi siê o \textbf{wahadle odwróconym}. 
	\\[0.5em]
	Z przedstawionego opisu wynika, ¿e jest to obiekt regulacji typu \textbf{SIMO} (ang.\textit{ single-input, multi-output}) i stanowi przykad \textbf{uk³adu niedosterowanego}. Jako sygna³ steruj¹cy przyjmuje siê moment silnika powoduj¹cy przemieszczenie wózka, natomiast sygna³ami wyjœciowymi jest po³o¿enie liniowe i k¹towe wahad³a.
}
%
\frame{
	\frametitle{Wahad³o odwrócone - Opis 2/2}
	\justify
	Model wahad³a zosta³ wyznaczony w oparciu o schemat przedstawiony na rys.\ref{fig:2_1}. Pocz¹tek uk³adu wspó³rzêdnych przyjêto w pocz¹tkowym po³o¿eniu wózka.
	%
	\begin{figure}[htb!]
		\begin{center}
			\includegraphics[width=0.5\linewidth]{fig2_1}
			%\\[1em]%
			\caption{Schemat wahad³a odwróconego } \label{fig:2_1}
		\end{center}            
	\end{figure}
	%
	Wózek wahad³a ma mo¿liwoœæ przemieszczania siê w osi $x$. Prêt wahad³a zamocowany jest jednym koñcem na wózku i obraca siê wokó³ osi przechodz¹cej prostopadle przez wózek o k¹t $\theta$. W dalszych rozwa¿aniach parametry zwi¹zane z wózkiem zosta³y oznaczone indeksem $_w$, natomiast parametry zwi¹zane z prêtem indeksem $_p$.
}
%
\begin{comment}
\frame{
	\frametitle{Opis}
	\justify
	Uk³ad si³ dzia³aj¹cych na wózek wahad³a przedstawiono na rys. \ref{fig:2_2}.
	%
	\begin{figure}[htb!]
		\begin{center}
			\includegraphics[width=0.35\linewidth]{fig2_2}
			%\\[1em]%
			\caption{Okreœlenie uk³adu si³ dzia³aj¹cych na wózek wahad³a} \label{fig:2_2}
		\end{center}                                         
	\end{figure}
	%
	\begin{equation}
	m_W\dot{x}_W=\sum F
	\end{equation}\label{eq:2_1}
	%
	\begin{equation}
	m_W\dot{x}_W=F-F_T-F_x
	\end{equation}\label{eq:2_2}
	%
	gdzie:  $m_W$ oznacza masê wózka,  $x_W$ po³o¿enie wózka w osi  $x$,  $F$ si³ê nadan¹ przez silnik,  $F_T$ si³ê tarcia wózka o prowadnicê,  $F_x$ si³ê reakcji prêta wahad³a na wózek.
	%
}
%
\frame{
	\frametitle{Opis}
	\justify
	Si³a tarcia wózka o prowadnicê:
	%
	\begin{equation}
	F_T=b\dot{x}_W
	\end{equation}\label{eq:2_3}
	%
	gdzie:  $b$ oznacza wspó³czynnik tarcia wiskotycznego.
	
	Zak³¹daj¹c, ¿e sygna³em steruj¹cym jest moment si³y generowany na wale silnika, si³ê  $F$ mo¿na okreœliæ jako:
	%
	\begin{equation}
	F=\frac{M_s}{r}
	\end{equation}\label{eq:2_4}
	%
	gdzie: $M_s$ oznacza moment silnika, $r$ promieñ ko³a zêbatego na silniku.
	
	Si³¹  $F_x$ oddzia³ywania prêta na wózek, wynika z przyspieszeñ dzia³aj¹cych na poruszaj¹cy siê prêt:
	%
	\begin{equation}
	F_x=m_P\dot{x}_P
	\end{equation}\label{eq:2_5}
	%
	Po³o¿enie œrodka ciê¿koœci prêta  $x_P$ zgodnie z zale¿noœci¹:
	%
	\begin{equation}
	x_P=x_W+l\sin(\theta)
	\end{equation}\label{eq:2_6}
	%
	gdzie:  $l$ jest odleg³oœci¹ œrodka ciê¿koœci prêta od wózka.
}
%
\frame{
	\frametitle{Opis}
	\justify
	Znaj¹c zale¿noœæ (\ref{eq:2_6}) mo¿na wyznaczyæ kolejne pochodne  $x_P$ po czasie, odpowiednio:
	%
	\begin{equation}
	\dot{x}_P=\frac{dx_P}{dt}=\frac{dx_W+l\sin(\theta)}{dt}=\frac{dx_W}{dt}+l\frac{d\sin(\theta)}{dt}=\frac{dx_W}{dt}+l\cos(\theta)\frac{d\theta}{dt}=\dot{x}_W+l\dot{\theta}\cos{\theta}
	\end{equation}\label{eq:2_7}
	%
	oraz
	\begin{equation}
	\ddot{x}_P=\frac{d}{dt}\left(\frac{dx_W+l\sin(\theta)}{dt}\right)=\frac{d^{2}x_W}{dt^2}+\frac{d}{dt}\left(l\cos{\theta}\dfrac{\theta}{dt}\right)=\frac{d^{2}x_W}{dt^{2}}-l\sin(\theta)\left(\frac{d\theta}{dt}\right)+l\cos{\theta}\left(\frac{d^{2}\theta}{dt^{2}}\right)
	\end{equation}\label{eq:2_8}
	%
	Podstawiaj¹c równanie (\ref{eq:2_8}) do zale¿noœci (\ref{eq:2_5}) otrzymuje siê: 
	%
	\begin{equation}
	F_x=m_P\ddot{x}_W-m_Pl\ddot{\theta}^2\sin(\theta) +m_Pl\ddot{\theta}\cos(\theta)
	\end{equation}\label{eq:2_9}
	%
	Znaj¹c wszystkie si³y dzia³aj¹ce na wózek mo¿na ostatecznie zapisaæ, ¿e:
	%
	\begin{equation}
	m_W\ddot{x}_W=\frac{M}{r}-b\dot{x}_W-m_P\ddot{x}_W+m_Pl\ddot{\theta}^2\sin{\theta}-m_Pl\ddot{\theta}\cos{\theta} 
	\end{equation}\label{eq:2_10}
	%
	\begin{equation}
	\left(m_W+m_P\right)\ddot{x}_W+b\dot{x}_W=\frac {M}{r}+m_Pl\dot{\theta}^2\sin{\theta}-m_Pl\ddot{\theta}\cos(\theta) 
	\end{equation}\label{eq:2_11}
}
%
\frame{
	\frametitle{Opis}
	\justify
	\begin{figure}[htb!]
		\begin{center}
			\includegraphics[width=0.2\linewidth]{fig2_3}
			%\\[1em]%
			\caption{Schemat wahad³a - si³y dzia³aj¹ce na wahad³o} \label{fig:2_3}
		\end{center}                               
	\end{figure}
	%
	Po³o¿enie œrodka ciê¿koœci prêta w osi poziomej  $x$ mo¿e zostaæ wyznaczone na podstawie po³o¿enia wózka. Aby wyznaczyæ po³o¿enie wahad³a w osi pionowej $y$, nale¿y rozpatrzyæ si³y dzia³aj¹ce na prêt w tej osi zgodnie z rys. \ref{fig:2_3}:
	\begin{equation}
	F_y-m_Pg=m_P\ddot{y}_P
	\end{equation}\label{eq:2_12}
	%
	\begin{equation}
	y_p=y_W+l\cos(\theta)
	\end{equation}\label{eq:2_13}
}
%
\frame{
	\frametitle{Opis}
	\justify
	Pochodne po³o¿enia pionowego  $\dot{y}_P$ oraz $\ddot{y}_P$ zosta³y wyznaczone analogicznie do $\dot{x}_P$ oraz $\ddot{x}_P$. Poniewa¿ wózek jest nieruchomy w osi  $y$ przyjêto, ¿e  $y_W=0$, $\dot{y}_W=0$, $\ddot{y}_W=0$, z czego wynika, ¿e:
	%
	\begin{equation}
	\dot{y}_P=-l\dot{\theta}\sin(\theta)
	\end{equation}\label{eq:2_14}
	%
	\begin{equation}
	\ddot{y}_P=-l\dot{\theta}^{2}\cos(\theta)-l\ddot{\theta}\sin(\theta)
	\end{equation}\label{eq:2_15}
	%
	Podstawiaj¹c zale¿noœæ (\ref{eq:2_15}) w równaniu (\ref{eq:2_12}) uzyskuje siê:
	%
	\begin{equation}
	F_y=m_Pg-m_Pl\dot{\theta}^{2}\cos(\theta) -m_Pl\ddot{\theta}\sin(\theta)
	\end{equation}\label{eq:2_16}
	%
	Ze wzglêdu, i¿ wahad³o porusza siê ruchem obrotowym, nale¿y dla niego równie¿ rozpatrzeæ równanie momentów:
	% 
	\begin{equation}
	I\ddot{\theta}=\sum \overline{M},
	\end{equation}\label{eq:2_17}
	%
	gdzie: $I$ jest momentem bezw³adnoœci wahad³a, $\overline{M}$ to momenty dzia³aj¹ce na prêt wahad³a prostopadle do osi obrotu. 	
}
%
\frame{
	\frametitle{Opis}
	\justify
	Traktuj¹c prêt wahad³a jako cia³o sztywne mo¿na przyj¹æ, ¿e momenty $\overline{M}$ powstaj¹ na skutek si³ dzia³aj¹cych na ramieniu wzglêdem œrodka ciê¿koœci wahad³a:
	%
	\begin{equation}
	\overline{M}=\overline{F}\times\overline{r},
	\end{equation}\label{eq:2_18}
	%
	gdzie: $\overline{F}$ to si³a dzia³aj¹ca na wahad³o, natomiast  $\overline{r}$ to ramiê, na którym dzia³a ta si³a.
	
	Si³y generuj¹ce momenty na wahadle to  $\overline{F}_{x}$ oraz  $\overline{F}_y$, poniewa¿ dla skupionej si³y grawitacji wahad³a ramiê  $r=0$. Zatem mo¿na napisaæ, ¿e:
	%
	\begin{equation}
	I\ddot{\theta}=-F_xl\cos(\theta)+F_yl\sin(\theta)
	\end{equation}\label{eq:2_19}	
}
%
\frame{
	\frametitle{Opis}
	\justify
	Podstawiaj¹c równania (\ref{eq:2_9}) oraz (\ref{eq:2_17}) do równania (\ref{eq:2_19}) otrzymuje siê:
	%
	\begin{equation}
	\begin{array}{rl}
	I\ddot{\theta}&=-\left(m_P\ddot{x}_W-m_Pl\ddot{\theta}^2\sin(\theta) +m_Pl\ddot{\theta}\cos(\theta)\right)l\cos(\theta)+\\
	&+\left(m_Pg-m_Pl\dot{\theta}^{2}\cos(\theta) -m_Pl\ddot{\theta}\sin(\theta)\right)l\sin(\theta)=\\ 
	&=-m_Pl\ddot{x}_W\cos(\theta)+m_Pl\ddot{\theta}^2\sin(\theta)\cos(\theta)-m_Pl^2\ddot{\theta}\cos(\theta)^2+\\ 
	&+m_Pgl\sin(\theta)-m_Pl^2\dot{\theta}^{2}\cos(\theta)\sin(\theta)-m_Pl^2\ddot{\theta}\sin(\theta)^2=\\
	&=-m_Pl\ddot{x}_W\cos(\theta)-m_Pl^2\ddot{\theta}\cos(\theta)^2+m_Pgl\sin(\theta)-m_Pl^2\ddot{\theta}\sin(\theta)^2=\\ 
	&=-m_Pl^2\ddot{\theta}+m_Pgl\sin(\theta)-m_Pl\ddot{x}_W\cos(\theta) 
	\end{array} 
	\end{equation}\label{eq:2_20}
	%
	\begin{equation}
	\left(I+m_Pl^2\right)\ddot{\theta}=m_Pgl\sin(\theta)-m_Pl\ddot{x}_W\cos(\theta)
	\end{equation}\label{eq:2_21}
	%
}
%
\frame{
	\frametitle{Opis}
	\justify
	Równania (\ref{eq:2_11}) oraz (\ref{eq:2_21}) umo¿liwiaj¹ w pe³ni opisaæ ruch wózka z wahad³em. Jednak¿e przedstawiaj¹ one opis obiektu w postaci uwik³anej. Mo¿na je przekszta³ciæ do nastêpuj¹cego uk³adu równañ, umo¿liwiaj¹cego bezpoœrednie obliczenie przyspieszeñ  $\ddot{x}_W$ i  $\ddot{\theta}$: 
	\begin{equation}
	\left\{
	\begin{array}{l}
	x_W=\dfrac{\dfrac{M}{r}-F_x-b\dot{x}_W}{M}
	\\
	\dot{\theta}=\dfrac{-F_xl\cos(\theta)+F_yl\sin(\theta)}{I}
	\\
	F_x=m_P\ddot{x}_W-m_Pl\dot{\theta}^{2}\sin(\theta)+m_Pl\ddot{\theta}\cos(\theta) 
	\\
	F_y=m_Pg-m_Pl\dot{\theta}^{2}\cos(\theta)-m_Pl\ddot{\theta}\sin(\theta)
	\end{array}
	\right.
	\end{equation}\label{eq:2_22}
}
%
\end{comment}
\frame{
	\frametitle{Model kinematyki}
	\footnotesize
	Parametry DH wahad³a odwróconego
					\begin{table}[htb!]
		\centering
		\begin{tabular}{|c|c|c|c|c|}
			\hline 
			i & $a_{i}$ & $\alpha_{i}$& $d_{i}$ & $\theta_{i}$\tabularnewline[0.3em]
			\hline 
			\hline 
			1 & $a_{1}=0$ & $\alpha_{1}=0$ & $d_{1}$ & $\theta_{1}=0$\tabularnewline[0.3em]
			\hline 
			2 & $a_{2}=0$ & $\alpha_{2}=\pi$ & $d_{2}=0$ & $\theta_{2}$\tabularnewline[0.3em]
			\hline 
		\end{tabular}
		\caption{Parametry DH.}
		\label{tab:parametry_DH}
	\end{table}
Macierze przekszta³ceñ
\begin{equation}
\mathbf T ^ { 0 } _ { 1 } = \left[ \begin{array} { c c c c } { \cos \theta _ { 1 } } & { - \cos \alpha_1 \sin \theta _ { 1 } } & { \sin \alpha_1\cdot  \sin \theta _ { 1 } } & { a _ { 1 } \cdot \cos \theta _ { 1 } } \\ { \sin \theta _ { 1 } } & { \cos \alpha_1\cdot  \cos \theta _ { 1 } } & { -\sin \alpha_1\cdot  \cos \theta _ { 1 }} & { a _ { 1 } \cdot \sin \theta _ { 1 } } \\ { 0 } & { 0 } & { 1 } & { 0 } \\ { 0 } & { 0 } & { 0 } & { 1 } \end{array} \right]
\end{equation}
\begin{equation}
\mathbf T ^ { 1 } _ { 2 } = \left[ \begin{array} { c c c c } { \cos \theta _ { 2 } } & { - \cos \alpha_2 \sin \theta _ { 2 } } & { \sin \alpha_2\cdot  \sin \theta _ { 2 } } & { a _ { 2 } \cdot \cos \theta _ { 2 } } \\ { \sin \theta _ { 2 } } & { \cos \alpha_2\cdot  \cos \theta _ { 2 } } & { -\sin \alpha_2\cdot  \cos \theta _ { 2 }} & { a _ { 2 } \cdot \sin \theta _ { 2 } } \\ { 0 } & { 0 } & { 1 } & { 0 } \\ { 0 } & { 0 } & { 0 } & { 1 } \end{array} \right]
\end{equation}
}
%
\frame{
	\frametitle{Zadanie proste kinematyki}
Dane: $Q=[d_1, \theta_2]$;
\\[1em]
Szukane: $T^{0}_{2}$
\begin{equation}
\mathbf T^{0}_{2}(Q)=\mathbf T^{0}_{1}(d_{1})\cdot \mathbf T^{1}_{2}(\theta_{2}) 
\end{equation}	
}
%
\frame{
	\frametitle{Zadanie odwrotne kinematyki}
	Maj¹c dane po³o¿enie i orientacjê prêta wahadla w postaci transformacji
	\begin{equation}
	\mathbf H = 
	\begin{bmatrix}
	\mathbf R & D \\
	0 & 1 \\
	\end{bmatrix}=\mathbf T^{0}_{2}(Q)=\mathbf T^{0}_{1}(d_{1})\cdot \mathbf T^{1}_{2}(\theta_{2}), \mathbf H\in R^{4\times 4},
	\end{equation}
	rozwi¹¿ równanie (znajdŸ wspó³rzêdne uogólnione $d_1, \theta_2$)
	\begin{equation}
	T^{0}_{2}(d_1, \theta_2) = \mathbf H
	\end{equation}
}
%
\frame{
	\frametitle{Zadanie odwrotne kinematyki}
	Otrzymujemy uk³ad równañ skalarnych:
	\begin{equation}
	\left\{\begin{array}{l}
	\mathbf{T}{}_{11}(d_1, \theta_2) =h_{11},\\
	\mathbf{T}{}_{12}(d_1, \theta_2) =h_{12},\\
	\mathbf{T}{}_{13}(d_1, \theta_2) =h_{13},\\
	\mathbf{T}{}_{14}(d_1, \theta_2) =h_{14},\\
	\mathbf{T}{}_{21}(d_1, \theta_2) =h_{21},\\
	\mathbf{T}{}_{22}(d_1, \theta_2) =h_{22},\\
	\mathbf{T}{}_{23}(d_1, \theta_2) =h_{23},\\
	\mathbf{T}{}_{24}(d_1, \theta_2) =h_{24},\\
	\end{array}
	\right. 
	\left\{\begin{array}{l}
	\mathbf{T}{}_{31}(d_1, \theta_2) =h_{31},\\
	\mathbf{T}{}_{32}(d_1, \theta_2) =h_{32},\\
	\mathbf{T}{}_{33}(d_1, \theta_2) =h_{33},\\
	\mathbf{T}{}_{34}(d_1, \theta_2) =h_{34},\\
	\mathbf{T}{}_{41}(d_1, \theta_2) =h_{41},\\
	\mathbf{T}{}_{42}(d_1, \theta_2) =h_{42},\\
	\mathbf{T}{}_{43}(d_1, \theta_2) =h_{43},\\
	\mathbf{T}{}_{44}(d_1, \theta_2) =h_{44},\\
	\end{array}
	\right. 
	\end{equation}
	Uk³ad mo¿e mieæ wiele rozwi¹zañ.
}
%
\frame{
	\frametitle{Zadanie proste kinematyki prêdkoœci}
	Wyznaczenie prêdkoœci $V^0_n$ i $\omega^0_n$ prêta wahad³a na podstawie znanych prêdkoœci wspó³rzêdnych uogólnionych $\dot{Q} = [\dot{d}_1,\dot{\theta}_{2}]^{T}$.
	\begin{equation}
	\begin{bmatrix}
	V^0_n\\
	\omega^0_n
	\end{bmatrix}
	=\mathbf{J}(Q)\cdot\dot{Q}=	\begin{bmatrix}
	\mathbf{J_D}(Q)\\
	\mathbf{J_R}(Q)
	\end{bmatrix}\cdot\dot{Q}
	\label{eq:v_jac}
	\end{equation}
	gdzie: $\mathbf J$ - jakobian.
	
Jakobiany $\mathbf{J_D}(Q)$ (przemieszczenia) oraz $\mathbf{J_R}(Q)$ (obrotu) mo¿emy wyznaczyæ na podstawie znanych prêdkoœci wspó³rzêdnych uogólnionych $\dot{Q} = [\dot{d}_1,\dot{\theta}_2]^{T}$.
\begin{equation}
\mathbf{J_D}(Q) = 
\begin{bmatrix}
\frac{\partial D_2^0}{\partial d_1} & \frac{\partial D_2^0}{\partial \theta_2} 
\end{bmatrix}
\end{equation}
%
\begin{equation}
\mathbf{J_R}(Q) = 
\begin{bmatrix}
\rho_1 Z^0_0  & \rho_2 Z^0_1  
\end{bmatrix}
\end{equation}
gdzie $Z_0^0 = \begin{bmatrix} 0 & 0 & 1 \end{bmatrix}^T$, $Z_1^0 = \mathbf R^{0}_1 \begin{bmatrix} 0 & 0 & 1 \end{bmatrix}^T$, $\rho_1=1$ (przegub przesuwny), $\rho_2=0$ (przegub obrotowy).
}
%
\frame{
	\frametitle{Zadanie odwrotne kinematyki prêdkoœci}
	\justify
	Wyznaczenie prêdkoœci wspó³rzêdnych uogólnionych $\dot{Q} = [\dot{d}_1,\dot{\theta}_2]^{T}$ na podstawie znanych prêdkoœci $V$ i $\omega$ œrodka ciêzkoœci prêta wahad³a.
	\begin{equation}
	\dot{Q}
	=[\mathbf{J}(Q)]^{-1}
	\begin{bmatrix}
	V\\
	\omega
	\end{bmatrix}
	\end{equation}
}
%
\frame{
	\frametitle{Model dynamiki}
}
%
\end{document}
