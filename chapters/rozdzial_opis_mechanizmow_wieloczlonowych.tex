
%ROZDZIA£ 1
\chapter{Opis mechanizmów wielocz³onowych - Janek+Kuba}
  W rozdziale przedstawiono podstawy matematyczne i fizyczne s³u¿¹ce do opisu
  robotów o wielu stopniach swobody (mechniazmów wielocz³onowych). Przedstawiono model robota w przestrzeni zmiennych stanu. Opisano sposób symulacji komputerowej dynamiki robota.	
  
  \subsubsection{Mechanizm wielocz³onowy}
  Mechanizm jest to zespó³ wspó³pracuj¹cych ze sob¹ czêœci sk³adowych maszyny lub przyrz¹du spe³niaj¹cych okreœlone zadanie, jak np. przenoszenie ruchu, si³, sygna³ów[1].
  Mechanizm wielocz³onowy jest to zespó³ po³¹czonych sztywnych lub elastycznych bry³. Po³¹czenia pozwalaj¹ na zmianê wzajemnego po³o¿enia pomiêdzy po³¹czonymi bry³ami.\footnote{\url{https://en.wikipedia.org/wiki/Multibody_system}}\\
  \todo{Dodaæ przyk³ad z obrazkiem - 2-link planar robotic arm - rysunek, ewentualnie przenieœæ to jeszcze wczeœniej - Mo¿e daæ to jako element rozdzia³u "Wprowadzenie"?}
  
  
  \section{Wprowadzenie matematyczne - Janek}
  \todo{Przenieœæ to do za³¹cznika?}
  
  \subsubsection{Podstawowe pojêcia}
  
  Geometry is a branch of mathematics concerned with questions of shape, size, relative position of figures, and the properties of space. \footnote{https://en.wikipedia.org/wiki/Geometry}
  
  Kinematics is a branch of classical mechanics that describes the motion of points, bodies (objects), and systems of bodies (groups of objects) without considering the mass of each or the forces that caused the motion.[1][2][3] Kinematics, as a field of study, is often referred to as the "geometry of motion" and is occasionally seen as a branch of mathematics.[4][5][6] A kinematics problem begins by describing the geometry of the system and declaring the initial conditions of any known values of position, velocity and/or acceleration of points within the system. Then, using arguments from geometry, the position, velocity and acceleration of any unknown parts of the system can be determined. \footnote{\url{https://en.wikipedia.org/wiki/Kinematics}}
  
  Dynamika = Kinetyka. In classical mechanics, analytical dynamics, or more briefly dynamics, is concerned with the relationship between motion of bodies and its causes, namely the forces acting on the bodies and the properties of the bodies, particularly mass and moment of inertia. The foundation of modern-day dynamics is Newtonian mechanics and its reformulation as Lagrangian mechanics and Hamiltonian mechanics.[1][2] \footnote{\url{https://en.wikipedia.org/wiki/Kinetics_(physics)}}\footnote{\url{https://en.wikipedia.org/wiki/Analytical_dynamics}}\\
  
    
  \subsubsection{Operacje macierzowe}
  odwracanie\\
  ortogonalnoœæ\\
  niezale¿noœæ równañ\\
  ró¿niczkowanie\\
  pochodne cz¹stkowe\\
  
  \subsubsection{Podstawy geometrii analitycznej}
    Analytic geometry is the study of geometry on a grid called the coordinate plane, or xyz-plane. \\
    Uk³ad wspó³rzêdnych. W szczególnoœci kartezjañski.\\
    Punkt. Wektor.\\
    Powierzchnia. P³aszczyzna. Równanie precyzuje zwykle powierzchniê.\\
    Linia.\\
    Odleg³oœæ i k¹t.\\
    Rzuty\\
    , prostopad³oœæ, równoleg³oœæ, przeciêcia itp.\\
    Bry³a sztywna = rigid body\\
    Degree of freedom\\
    The degrees of freedom denote the number of independent kinematical possibilities to move. In other words, degrees of freedom are the minimum number of parameters required to completely define the position of an entity in space.\\
    A rigid body has six degrees of freedom in the case of general spatial motion, three of them translational degrees of freedom and three rotational degrees of freedom. In the case of planar motion, a body has only three degrees of freedom with only one rotational and two translational degrees of freedom.\\
    
  \subsubsection{Podstawowe transformacje uk³adów wspó³rzêdnych}
  Elementarne macierze transformacji – macierze opisuj¹ce zale¿noœæ pomiêdzy wspó³rzêdnymi wskazanego punktu przed i po transformacji. Przez transformacjê rozumiemy w tym przypadku translacjê (czyli przesuniêcie), skalowanie oraz rotacjê (czyli obrót). W przypadku opisu mechanizmów wielocz³onych sens fizyczny maj¹ zazwyczaj tylko operacje translacji o rotacji - tylko one bêd¹ omawiane.

  Transformacje maj¹ najczêœciej o jeden rz¹d wiêcej ni¿ wymiar wektora wspó³rzêdnych, a dok³adniej maj¹ rz¹d równy wymiarowi wspó³rzêdnych jednorodnych\todo{wyjasnic gdzies co to jest}. \footnote{\url{https://pl.wikipedia.org/wiki/Elementarne_macierze_transformacji}}
    
\textbf{Elementarne macierze translacji}\\
W tym przypadku trzy przesuniêcia mog¹ zostaæ zapisane jako jedna macierz, poniewa¿ ró¿ni¹ siê tylko ostatni¹ kolumn¹.

\begin{equation}
Tran( a, b, c ) = \begin{bmatrix} 1 & 0 & 0 & a \\ 0 & 1 & 0 & b \\ 0 & 0 & 1 & c \\ 0 & 0 & 0 & 1 \end{bmatrix}
\end{equation}
gdzie: 
$a, b, c$ - przesuniêcie wzd³u¿ osi $X, Y$ oraz $Z$

Mo¿na tak¿e rozbiæ tê macierz na 3 osobne: $TranX(a)$, $TranY(b)$ oraz $TranZ(c)$.
    
\textbf{Elementarne macierze rotacji}\\
Obroty przedstawiane s¹ w ró¿ny sposób, dlatego te¿ elementarne macierze rotacji musz¹ byæ przedstawiane oddzielnie.

Dla osi X:
\begin{equation}
RotX(\alpha)=
\begin{bmatrix}
  1 & 0 & 0 & 0 \\
  0 & \cos\alpha & -\sin\alpha & 0 \\
  0 & \sin\alpha & \cos\alpha & 0 \\
  0 & 0 & 0 & 1 \\
\end{bmatrix}
\end{equation}

Dla osi Y:
\begin{equation}
RotY(\beta)=
\begin{bmatrix}
  \cos\beta & 0 & \sin\beta & 0 \\
  0 & 1 & 0 & 0 \\
  -\sin\beta & 0 & \cos\beta & 0 \\
  0 & 0 & 0 & 1 \\
\end{bmatrix}
\end{equation}

Dla osi Z:
\begin{equation}
RotZ(\gamma)=
\begin{bmatrix}
  \cos\gamma & -\sin\gamma & 0 & 0 \\
  \sin\gamma & \cos\gamma & 0 & 0 \\
  0 & 0 & 1 & 0 \\
  0 & 0 & 0 & 1 \\
\end{bmatrix}
\end{equation}

\textbf{Sk³adanie macierzy}\\
Istnieje mo¿liwoœæ sk³adania transformacji. Wówczas obliczamy macierz wynikow¹ bêd¹c¹ iloczynem sk³adowych macierzy transformacji, któr¹ "dzia³amy" na dany punkt w przestrzeni.

\begin{equation}
\begin{bmatrix} x' \\ y' \\ z' \\ 1 \end{bmatrix} = 
\begin{bmatrix} 1 & 0 & 0 & a \\ 0 & 1 & 0 & b \\ 0 & 0 & 1 & c \\ 0 & 0 & 0 & 1 \end{bmatrix}
\begin{bmatrix}
  \cos\gamma & -\sin\gamma & 0 & 0 \\
  \sin\gamma & \cos\gamma & 0 & 0 \\
  0 & 0 & 1 & 0 \\
  0 & 0 & 0 & 1 \\
\end{bmatrix}
\begin{bmatrix} x \\ y \\ z \\ 1 \end{bmatrix}
\end{equation}

W powy¿szym przyk³adzie najpierw wykonujemy operacjê rotacji, nastêpnie translacji o wektor. Takich operacji mo¿e byæ wiêcej. Ka¿d¹ nastêpn¹ macierz transformacji dok³adamy po lewej stronie iloczynu macierzy, przy czym mno¿enie macierzy przez wektor wykonujemy od prawej strony do lewej.

Mo¿emy tak¿e powy¿sz¹ operacjê zast¹piæ iloczynem macierzy wynikowej przez wektor. 

\begin{equation}
\begin{bmatrix} x' \\ y' \\ z' \\ 1 \end{bmatrix} = 
M
\begin{bmatrix} x \\ y \\ z \\ 1 \end{bmatrix}
\end{equation},

Macierz transformacji bêd¹c¹ z³o¿eniem poszczególnych transformacji sk³adowych otrzymamy ze wzoru.

\begin{equation}
M = 
\begin{bmatrix} 1 & 0 & 0 & a \\ 0 & 1 & 0 & b \\ 0 & 0 & 1 & c \\ 0 & 0 & 0 & 1 \end{bmatrix}
\begin{bmatrix}
  \cos\gamma & -\sin\gamma & 0 & 0 \\
  \sin\gamma & \cos\gamma & 0 & 0 \\
  0 & 0 & 1 & 0 \\
  0 & 0 & 0 & 1 \\
\end{bmatrix}
\end{equation},

Gdy s¹ dane dwie (lub wiêcej) macierze przekszta³ceñ:
\begin{itemize}
\item $Rot^0_1$ - macierz przekszta³caj¹ca zerowy uk³ad wspó³rzêdnych w uk³ad o indeksie pierwszym.
\item $Rot^1_2$ - macierz przekszta³caj¹ca uk³ad pierwszy w uk³ad drugi.
\end{itemize}
Obydwie macierze mo¿na z³o¿yæ w jedn¹ macierz przekszta³caj¹c¹ uk³ad zerowy w uk³ad drugi.
$Rot^0_2=Rot^0_1*Rot^1_2$

Macierze te oraz ich [[mno¿enie macierzy|iloczyn]] nale¿y do specjalnej grupy euklidesowej SE(3). 

\textbf{Specjalna grupa euklidesowa}\\
Specjalna grupa euklidesowa SE(3) to zbiór [[macierz]]y $\begin{bmatrix} R & T \\ 0 & 1 \end{bmatrix}$ (gdzie R to macierz opisuj¹ca obrót, a T to macierz opisuj¹ca [[translacja (matematyka)|translacjê]]), które spe³niaj¹ warunki:
\begin{itemize}
\item \begin{equation}\begin{bmatrix} R & T \\ 0 & 1 \end{bmatrix}^{-1} \begin{bmatrix} R & T \\ 0 & 1 \end{bmatrix} = I_4\end{equation}
\item \begin{equation}\begin{bmatrix} R & T \\ 0 & 1 \end{bmatrix}^{-1} = \begin{bmatrix} R^T & -R^TT \\ 0 & 1 \end{bmatrix}\end{equation}
\item \begin{equation}\begin{bmatrix} R_1 & T_1 \\ 0 & 1 \end{bmatrix}\begin{bmatrix} R_2 & T_2 \\ 0 & 1 \end{bmatrix} = \begin{bmatrix} R_1R_2 & R_1T_2+T_1 \\ 0 & 1 \end{bmatrix} \in SE(3)\end{equation}
\end{itemize}

Specjalna grupa euklidesowa mo¿e byæ tak¿e zapisana jako iloczyn [[wektor]]a oraz [[grupa obrotów|grupy obrotów]] tj. $SE(3) \cong R^3 \times SO(3)$.

Macierze nale¿¹ce do SE(3) pozwalaj¹ opisaæ [[Ruch (fizyka)|ruch]] [[bry³a sztywna|cia³a sztywnego]]. Do ich konstrukcji wykorzystane mog¹ byæ elementarne macierze transformacji. Przy takim zapisie macierzy konieczne jest tak¿e stosowanie [[wspó³rzêdne jednorodne|wspó³rzêdnych jednorodnych]], ¿eby wymiar [[wektor]]a wspó³rzêdnych by³ równy liczbie kolumn macierzy. 

\textbf{Interpretacje}\\
Macierze nale¿¹ce do SE(3) pozwalaj¹:
\begin{itemize}
\item przekszta³ciæ punkt P w Q wzglêdem ustalonego [[uk³ad wspó³rzêdnych|uk³adu]] $(X_0,Y_0,Z_0)$
\item przekszta³ciæ uk³ad $(X_0,Y_0,Z_0)$ w taki uk³ad $(X_1,Y_1,Z_1)$, ¿e wspó³rzêdne punktu $\begin{bmatrix} x & 1 \end{bmatrix}^T$ wzglêdem $(X_1,Y_1,Z_1)$ transformuj¹ siê do uk³adu $(X_0,Y_0,Z_0)$ jako:
\begin{equation}\begin{bmatrix} R & T \\ 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ 1 \end{bmatrix}\end{equation}
\end{itemize}
  
  
  \section{Model geometrii, kinematyki i dynamiki mechanizmów wielocz³onowych.}

  \subsection{Model geometrii - Janek}
  W pracy rozwa¿any jest robot o pojedynczym ³añcuchu kinematycznym, sk³adaj¹cy
  siê z cz³onów po³¹czonych przegubami. Ka¿dy z przegubów posiada jeden stopieñ swobody. W dalszej czêœci pracy rozwa¿any bêdzie robot o $n$-stopniach swobody z przegubami typu obrotowego, gdy¿ tylko przeguby tego typu wystêpuj¹ w rozwa¿anym w pracy robocie PUMA 560. Przyjêto, ¿e dla robota o $n$-przegubach ponumerowanych od 1 do $n$ istnieje $n$+1 cz³onów ponumerowanych od 0 do $n$. Cz³on o numerze 0 nazywany jest cz³onem bazowym, natomiast cz³on $n$ jest cz³onem z elementem wykonawczym. Przegub i ³¹czy cz³ony o numerach $i$-1 i $i$. Z ka¿dym z cz³onów zwi¹zany jest uk³ad wspó³rzêdnych o tym samym numerze.
  Rozwa¿amy mechanizm wielocz³onowy sk³adaj¹cy siê z cz³onów po³¹czonych stawami. Mog¹ wystêpowaæ cz³ony nieruchome.\\
  
  \subsubsection{Cz³on}
  A body is usually considered to be a rigid or flexible part of a mechanical system. An example of a body is the arm of a robot, a wheel or axle in a car or the human forearm.\\
  
  \subsubsection{Staw, przegub}
  A link is the connection of two or more bodies, or a body with the ground. The link is defined by certain (kinematical) constraints that restrict the relative motion of the bodies. Typical constraints are:\\
    cardan joint or Universal Joint ; 4 kinematical constraints\\
    prismatic joint; relative displacement along one axis is allowed, constrains relative rotation; implies 5 kinematical constraints\\
    revolute joint; only one relative rotation is allowed; implies 5 kinematical constraints; see the example above\\
    spherical joint; constrains relative displacements in one point, relative rotation is allowed; implies 3 kinematical constraints\\
  Constraint condition\\
 A constraint condition implies a restriction in the kinematical degrees of freedom of one or more bodies. The classical constraint is usually an algebraic equation that defines the relative translation or rotation between two bodies. There are furthermore possibilities to constrain the relative velocity between two bodies or a body and the ground. This is for example the case of a rolling disc, where the point of the disc that contacts the ground has always zero relative velocity with respect to the ground. In the case that the velocity constraint condition cannot be integrated in time in order to form a position constraint, it is called non-holonomic. This is the case for the general rolling constraint.  

  \subsubsection{Mechanizm wielocz³onowy}
  £añcuch kinematyczny jest to czêœæ mechanizmu w postaci kilku po³¹czonych ze sob¹ cz³onów (bry³) tworz¹cych jedn¹ lub wiele par kinematycznych, realizuj¹cy zdefiniowane przeniesienie ruchu.
  Model geometrii - zestaw cz³onów i stawów. £añcuch kinematyczny.\\
    Stopnie swobody i wiêzy w ujêciu mechanizmu wielocz³onowego, wiêzy bierne, nadmiarowe?\\
    Ruchliwoœæ\\
    Notacja DH.\\
    Zadanie proste geometrii.\\
    Zadanie odwrotne geometrii.\\
    
      Dla okreœlenia uk³adów wspó³rzêdnych kartezjañskich, które bêd¹ przyporz¹dkowane
  w odpowiedni sposób do cz³onów i przegubów przyjêto notacjê Denavita-Hartenberga
  \cite{hartenberg:1955}, której podstawy zamieszczono na Rys. \ref{fig:1}:

  \begin{figure}[htb!]
	  \begin{center}
		  \includegraphics[width=1\linewidth]{figures/fig1}
		  %\\[1em]%
		  \caption{Standardowa notacja Denavita – Hartenberga (przyk³ad dwóch obrotowych przegubów $i$-1 oraz $i$), $a_i$ - d³ugoœæ cz³onu, odleg³oœæ od osi $z_i-1$ do osi $z_i$ mierzona wzd³u¿ osi $x_i$, $\alpha_i$ – k¹t skrêcenia, k¹t miêdzy osiami $z_i-1$ i $z_i$ mierzony wokó³ osi $x_i$, $d_i$ - odsuniêcie cz³onów,
			  odleg³oœæ od œrodka uk³adu $i-1$ do osi $x_i$ mierzona wzd³u¿ osi $z_i-1$, $\theta_i$ - k¹t konfiguracji, k¹t miêdzy osiami $x_i-1$ i $x_i$ mierzony wokó³ osi $z_i-1$ } \label{fig:1}
	  \end{center}                                         
  \end{figure}

  Po okreœleniu parametrów uk³adów wspó³rzêdnych kartezjañskich mo¿na wyznaczyæ
  jednorodne macierze przekszta³ceñ okreœlaj¹cych orientacjê i po³o¿enie uk³adu $i$ wzglêdem uk³adu $i-1$ \cite{fu:1987}:

  \begin{equation}
  ^{i-1}T{i}=T_{z,\theta}T_{z,d}T_{x,a}T_{x,\alpha}
  \end{equation}\label{eq:1}
  %
  gdzie: $^{i-1}T{i}$ - jednorodna macierz przekszta³cenia uk³adu $i-1$ wzglêdem uk³adu $i$,$T_{z,\theta}$ - jednorodna macierz obrotu uk³adu $i$ wzglêdem uk³adu $i-1$ wokó³ osi $z_i-1$ o k¹t $\theta_i$, $T_{z,d}$ - jednorodna macierz przesuniêcia uk³adu $i$ wzglêdem uk³adu $i-1$ o $d_i$ wzd³u¿ osi $z_i-1$,$T_{x,a}$ -  jednorodna macierz przesuniêcia uk³adu $i$ wzglêdem uk³adu $i-1$ o $a_i$ wzd³u¿ osi $x_i$. ,$T_{x,\alpha}$-jednorodna macierz obrotu uk³adu $i$ wzglêdem uk³adu $i-1$ wokó³ osi $x_i$ o k¹t $\alpha_i$. 

  Macierze te wyra¿one s¹ nastêpuj¹cymi zale¿noœciami:
  %
  \begin{equation}
  T_{z,\theta}=\left[\begin{array}{cccc}
  \cos{\theta_i} & -\sin{\theta_i} & 0 & 0 \\ 
  \sin{\theta_i} & \cos{\theta_i} & 0 & 0 \\ 
  0 & 0 & 1 & 0 \\ 
  0 & 0 & 0 & 1
  \end{array}\right] 
  \end{equation}\label{eq:2}
  %
  \begin{equation}
  T_{z,d}=\left[\begin{array}{cccc}
  1 & 0 & 0 & 0 \\ 
  0 & 1 & 0 & 0 \\ 
  0 & 0 & 1 & d_{i} \\ 
  0 & 0 & 0 & 1
  \end{array}\right] 
  \end{equation}\label{eq:3}
  %
  \begin{equation}
  T_{x,a}=\left[\begin{array}{cccc}
  1 & 0 & 0 & a_{i} \\ 
  0 & 1 & 0 & 0 \\ 
  0 & 0 & 1 & 0 \\ 
  0 & 0 & 0 & 1
  \end{array}\right] 
  \end{equation}\label{eq:4}
  %
  \begin{equation}
  T_{x,\alpha}=\left[\begin{array}{cccc}
  1 & 0 & 0 & 0 \\ 
  0 & \cos{\alpha_i} & -\sin{\alpha_i} & 0 \\ 
  0 & \sin{\alpha_i} & \cos{\alpha_i} & 0 \\ 
  0 & 0 & 0 & 1
  \end{array}\right] 
  \end{equation}\label{eq:5}
  %
  Wykorzystuj¹c jednorodne macierze przekszta³ceñ mo¿na obliczyæ wspó³rzêdne
  punktu w $m$-tym uk³adzie, znaj¹c wspó³rzêdne tego samego punktu w $k$-tym uk³adzie
  (zak³adaj¹c, ¿e $k>m$), jest to tzw. proste zadanie kinematyki. Zale¿noœæ t¹ wyznacza siê
  korzystaj¹c z wyra¿enia \cite{fu:1987}:
  %
  \begin{equation}
  P_{Am}=^{m}T_{k}P_{Ak}, k>m
  \end{equation}\label{eq:6}
  %
  gdzie:
  %
  \begin{equation}
  ^{m}T_{k}=^{m}T_{m+1}\quad ^{m+1}T_{m+2} \dots ^{k-1}T_{k}
  \end{equation}\label{eq:7}
  %
  $P_{Ak}=\left[\begin{array}{c}
  x_{Ak}\\ 
  y_{Ak}\\ 
  z_{Ak}\\ 
  1
  \end{array}\right]$ - jednorodny wektor wspó³rzêdnych punktu $A$ w $k$-tym uk³adzie wspó³rzêdnych

  $P_{Am}=\left[\begin{array}{c}
  x_{Am}\\ 
  y_{Am}\\ 
  z_{Am}\\ 
  1
  \end{array}\right]$ - jednorodny wektor wspó³rzêdnych punktu $A$ w $m$-tym uk³adzie wspó³rzêdnych
  %
    
  %
  \subsection{Model kinematyki - Janek}

  
  \subsection{Model dynamiki - Kuba}
  %
  Zale¿noœci opisuj¹ce dynamikê robota o $n$-stopniach swobody mo¿na wyznaczyæ
  wykorzystuj¹c uogólnione równanie Lagrange’a - Eulera o postaci \cite{fu:1987}
  %
  \begin{equation}
  \tau_{i}=\dfrac{d}{dt}\left(\dfrac{\delta L}{\delta \dot{q_{i}}}\right)-\dfrac{\delta L}{\delta q_{i}}, i=1,2,\dots,n
  \end{equation}\label{eq:8}
  gdzie: 
  $L$ - funkcja Lagrange’a (lagrangian) – funkcja potencja³u kinetycznego.
  %
  \begin{equation}
  L = K-P
  \end{equation}\label{eq:9}
  %
  $K$ - ca³kowita energia kinetyczna uk³adu, 
  $P$ - ca³kowita energia potencjalna uk³adu,
  $q_i$ - uogólnione wspó³rzêdne uk³adu w przegubie $i$, $\tau_i$ - uogólnione wymuszenia (si³y lub momenty) dzia³aj¹ce w przegubie $i$
  \footnote{W robocie o przegubach obrotowych, jako uogólnione wspó³rzêdne przyjmuje siê
  po³o¿enia k¹towe w przegubach, natomiast jako uogólnione wymuszenia przyjmuje siê
  momenty napêdowe w przegubach.}.

  Korzystaj¹c z równañ Lagrange’a-Eulera, zale¿noœci opisuj¹ce dynamikê robota z
  wszystkimi przegubami obrotowymi, mo¿na przedstawiæ w nastêpuj¹cy sposób \cite{fu:1987}.
	  %
  \begin{equation}
  \tau=M(\theta)\ddot{\theta}+V(\theta, \dot{\theta})+G(\theta)
  \end{equation}\label{eq:10}
  %
  gdzie: $\tau\in R^{n}$ - wektor momentów napêdowych w przegubach, $n$ - iloœæ stopni swobody robota, 
  $M(\theta)\in R^{n\times n}$ - macierz bezw³adnoœci robota.
  $V(\theta, \dot{\theta})$ - wektor wyrazów zawieraj¹cych sk³adowe momentu zale¿ne od si³
  odœrodkowych i Coriolisa, $G(\theta)\in R^{n}$- wektor wyrazów zawieraj¹cych sk³adowe momentu zale¿ne od si³
  grawitacji, $\theta\in R^{n}$ - wektor po³o¿eñ k¹towych w poszczególnych przegubach.

  \textbf{Macierz $M(\theta)\in R^{n\times n}$}

  Elementy macierzy bezw³adnoœci wyznacza siê korzystaj¹c z zale¿noœci:

  \begin{equation}
  m_{ik}=\sum_{j=\max(i,k)}^{n}Tr(U_{jk}J_{j}U_{jk}^{T}), i,k=1,2,\dots,n
  \end{equation}\label{eq:11}
  gdzie:
  \begin{equation}
  U_{jk}\equiv \dfrac{\delta ^{0}T_{i}}{\delta \theta_{j}}=
  \left\{\begin{array}{l}
  ^{0}T_{j-1}Q ^{j-1}T_{i}, \text{dla} j\leq i\\ 
  0, \text{dla} j>i
  \end{array}\right. 
  \end{equation}\label{eq:12}
  %
  \begin{equation}
  Q=\left[ \begin{array}{cccc}
  0 & -1  & 0 & 0 \\ 
  1 & 0 & 0 & 0 \\ 
  0 & 0 & 0 & 0 \\ 
  0 & 0 & 0 & 0
  \end{array} \right] \text{- dla przegubu obrotowego}
  \end{equation}\label{eq:13}
  %
  $J_{i}$ - jednorodna macierz inercji cz³onu $i$ wyra¿ona zale¿noœci¹:
  %
  \begin{equation}
  \begin{array}{l}
  J_{i}=\int r_{i}r_{i}^{T}dm=\\
  \left[ \begin{array}{cccc}
  \dfrac{-I_{XXi}+I_{YYi}+I_{ZZi}}{2} & I_{XYi} & I_{XZi} & m_{i}\overline{x}_{i} \\ 
  I_{XYi} & \dfrac{I_{XXi}-I_{YYi}+I_{ZZi}}{2} & I_{YZi} & m_{i}\overline{y}_{i} \\ 
  I_{XZi} & I_{YZi} & \dfrac{I_{XXi}+I_{YYi}-I_{ZZi}}{2} & m_{i}\overline{z}_{i} \\ 
  m_{i}\overline{x}_{i} & m_{i}\overline{y}_{i} & m_{i}\overline{z}_{i} & m_{i}
  \end{array} \right] 
  \end{array}
  \end{equation}\label{eq:14}
  %
  $I_{XXi}$,$I_{YYi}$,$I_{ZZi}$ - masowe momenty bezw³adnoœci cz³onu $i$, $I_{XYi}$,$I_{XZi}$,$I_{YZi}$ - masowe momenty dewiacji cz³onu $i$, $r_{i}=[x_{i}\quad y_{i} ]\quad z_{i}]^{T}$ - jednorodny wektor wspó³rzêdnych œrodka masy cz³onu $i$ wyra¿ony w
  $i$-tym uk³adzie wspó³rzêdnych, $Tr(A)=\sum_{i=1}^{n}a_{ii}$ - œlad macierzy kwadratowej $A\in R^{n\times n}$.

  \textbf{Wektor $V(\theta, \dot{\theta})$ ma postaæ}

  \begin{equation}
  V(\theta, \dot{\theta})=[V_{1},V_{2},\dots,V_{n}]^{T}
  \end{equation}\label{eq:15}

  Elementy wektora $V(\theta, \dot{\theta})$ mo¿na wyznaczyæ korzystaj¹c z nastêpuj¹cych zale¿noœci:

  \begin{equation}
  V_{i}=\dot{\theta}^{T}H_{i}\dot{\theta}
  \end{equation}\label{eq:16}

  \begin{equation}
  H_{i}\in R^{n\times n}, i=1,2,\dots,n
  \end{equation}\label{eq:17}

  \begin{equation}
  h_{ikl}=\sum_{j=\max(i,k,l)}^{n}Tr(U_{jkl}J_{j}U_{ji}^{T}), i,k,l=1,2,\dots,n
  \end{equation}\label{eq:18}

  gdzie:
  \begin{equation}
  U_{ijk}\equiv \dfrac{\delta ^{0}U_{ij}}{\delta \theta_{k}}=
  \left\{\begin{array}{l}
  ^{0}T_{j-1}Q_{j} ^{j-1}T_{k-1} Q_{k} ^{k-1}T_{i}, \text{dla} j\leq k\leq i\\ 
  ^{0}T_{k-1}Q_{k} ^{k-1}T_{j-1} Q_{j} ^{j-1}T_{i}, \text{dla } k\leq j\leq i\\ 
  0, \text{dla } j>i \text{ lub } i<k
  \end{array}\right. 
  \end{equation}\label{eq:19}
  %
  \textbf{Wektor $G(\theta)$ ma postaæ}

  Elementy wektora $G(\theta)$ mo¿na wyznaczyæ korzystaj¹c z zale¿noœci:

  \begin{equation}
  g_{i}=\sum_{j=i}^{n}(-m_{j}\overline{g}U_{ij} ^{j}\overline{r}_{j}), i=1,2,\dots,n
  \end{equation}\label{eq:20}

  gdzie: $\overline{g}=[g_{x}\quad g_{y}\quad g_{x}\quad 0]^{T}$ -jednorodny wektor grawitacji wyra¿ony w bazowym uk³adzie
  wspó³rzêdnych, $\sqrt{\overline{g}\overline{g}^{T}}=9.8062 [m/s{2}]$ - na powierzcni ziemi, $m_{i}$ masa cz³onu $i$.

  Nale¿y dodaæ, ¿e istnieje szereg innych metod wyznaczania równañ dynamiki robota,
  np. metoda Newtona-Eulera, uogólniona metoda d’Alamberta \cite{fu:1987},
  metoda Christoffela-Lagrange’a, metoda Walkera-Orina \cite{hejmo:1997}. Ich powstanie
  wynik³o g³ównie z potrzeby stworzenia szybkich algorytmów do obliczeñ numerycznych.
  Dok³adniejsz¹ analizê i porównanie algorytmów mo¿na znaleŸæ w \cite{fu:1987,hejmo:1997}.
  W dalszej czêœci pracy wykorzystywany jest algorytm Lagrange’a-Eulera.
  Wyznaczona tym sposobem postaæ równañ dynamiki \ref{eq:10} pozwala na ³atw¹ analizê w³aœciwoœci robota, zaprojektowania uniwersalnego algorytmu do jego symulacji, oraz
  syntezê uk³adu sterowania.
  %
  \subsection{W³aœciwoœci strukturalne modelu dynamiki}
  %
  \par Model matematyczny robota (\ref{eq:10}) posiada charakterystyczne w³asnoœci strukturalne. S¹ one czêsto wykorzystywane podczas weryfikacji poprawnoœci modeli otrzymanych ró¿nymi metodami w trakcie projektowania i analizy uk³adów sterowania robotów. Podstawowe w³asnoœci, które bêd¹ wykorzystywane w pracy, s¹ nastêpuj¹ce \cite{tourassis:properties,swider:phd,morecki:podstawy,lewis:neuralcontrol}
  %
  
  \par \textbf{W³asnoœci strukturalne modelu robota ({WMR})}
  %
  \begin{description}
  	%
  	\item[WMR.1] Macierz inercji $M(q)$ jest symetryczna
  	%
  	\begin{equation}\label{2.4.1}%{2.17}
  	M(q)=M^{T}(q)
  	\end{equation}
  	%
  	\item[WMR.2] Macierz inercji $M(q)$ jest dodatnio okreœlona
  	%
  	\begin{equation}\label{2.4.2}%{2.18}
  	x^{T}M(q)x > 0 \qquad \forall x=[x_{i}]_{n \times 1}, x \neq 0
  	\end{equation}
  	%
  	\item[WMR.3] Elementy $m_{i,j}(q)$ macierzy inercji $M(q)$ nie zale¿¹ od przemieszczeñ uogólnionych w 'aktualnym' przegubie i przegubach 'poprzednich'
  	%
  	\begin{equation}\label{2.4.4}%{2.20}
  	m_{i,j}(q)=m_{i,j}(q_{k+1},q_{k+2}, \ldots, q_{n}), \ \mathrm{gdzie} \ k=\min(i,j), \ \forall i,j=1,\ldots,n
  	\end{equation}
  	%
  \end{description}
  %
  Z w³asnoœci \emph{WMR.1} - \emph{WMR.3} wynikaj¹ nastêpuj¹ce wnioski
  %
  \begin{enumerate}
  	%
  	\item Macierz $M(q)$ jest nieosobliwa
  	%
  	\begin{equation}\label{2.4.3}
  	\text{det}[M(q)]\neq 0
  	\end{equation}
  	%
  	\item Mo¿na dokonaæ dekompozycji macierzy $M(q)$
  	%
  	\begin{equation}\label{2.4.3a}
  	M(q)=P^{T}P \qquad \det{P}\neq 0
  	\end{equation}
  	%
  	\item ¯aden element macierzy inercji nie zale¿y od przemieszczenia uogólnionego w pierwszym przegubie, natomiast element $m_{n,n}$ nie zale¿y od przemieszczeñ uogólnionych w ¿adnym z przegubów i ma wartoœæ sta³¹.
  	%
  	\item Odwrócona macierz inercji $\bar{M}(q)=[\bar{m}_{i,j}(q)]_{n \times n}$ jest symetryczna
  	%
  	\begin{equation}\label{2.6.9}%{2.17}
  	\bar{M}(q)=M(q)^{-1}=\bar{M}^{T}(q)
  	\end{equation}
  	%
  	\item Odwrócona macierz inercji $\bar{M}(q)$ jest dodatnio okreœlona
  	%
  	\begin{equation}\label{2.6.10}%{2.18}
  	x^{T}\bar{M}(q)x > 0 \qquad \forall x=[x_{i}]_{n \times 1}, x \neq 0
  	\end{equation}
  	%
  	\item Ka¿dy element odwróconej macierzy inercji $\bar{M}(q)$ jest funkcj¹ przemieszczeñ uogólnionych we wszystkich przegubach oprócz pierwszego
  	%
  	\begin{equation}\label{2.6.12}%{2.20}
  	\bar{m}_{i,j}(q)=\bar{m}_{i,j}(q_{2}, \ldots, q_{n}) \qquad \forall i,j=1,\ldots,n
  	\end{equation}
  	%
  \end{enumerate}
  %
  \par Model matematyczny robota o $n$-stopniach swobody z czasem dyskretnym mo¿na otrzymaæ aproksymuj¹c pochodne przemieszczeñ uogólnionych \cite*{kurek:neural} (ró¿niczkowanie metod¹ \emph{Eulera})
  %
  \begin{equation}\label{3.1.1}
  \dot{q}(k)\approx\frac{q(k)-q(k-1)}{T_{p}}
  \end{equation}
  %
  \begin{equation}\label{3.1.2}
  \ddot{q}(k)\approx\frac{\dot{q}(k+1)-\dot{q}(k)}{T_{p}}\approx\frac{q(k+1)-2q(k)+q(k-1)}{{T_{p}}^2}
  \end{equation}
  %
  gdzie $T_{p}$ - okres próbkowania, $k$ - czas dyskretny, $t=kT_{p}$.
  %
  \par Po podstawieniu zale¿noœci (\ref{3.1.1}) i (\ref{3.1.2}) do równania (\ref{eq:10}) otrzymuje siê model z czasem dyskretnym robota w postaci równañ \emph{Lagrange'a - Eulera}
  %
  \begin{equation}\label{3.1.3}
  M[q(k)]\frac{q(k+1)-2q(k)+q(k-1)}{{T_{p}}^2}+V[q(k),q(k-1)]+G[q(k)]=\tau(k)
  \end{equation}
  %
  gdzie, analogicznie jak w modelu (\ref{eq:10}), $M[q(k)]=[m_{i,j}[q(k)]]_{n \times n}$ - macierz inercji (bezw³adnoœci) robota, $V[q(k),q(k-1)]=[v_{i}[q(k),q(k-1)]]_{n \times 1}$ - wektor oddzia³ywañ zale¿nych od si³ odœrodkowych i si³ \emph{Coriolisa}, $G[q(k)]=[g_{i}[q(k)]]_{n \times 1}$ - wektor oddzia³ywañ zale¿nych od si³ grawitacji.
  %
  \par Model z czasem dyskretnym robota (\ref{3.1.3}) zachowuje w³asnoœci strukturalne modelu robota \emph{WMR.1} - \emph{WMR.3}.
  %
  \section{Opis mechanizmów wielocz³onowych w przestrzeni stanu.}
  %
  Równanie dynamiki robota w przestrzeni zmiennych stanu mo¿na wyznaczyæ w  oparciu o macierzowe równanie dynamiki (\ref{eq:10}). Definiuj¹c wektor stanu dla robota w  postaci \cite{fu:1987}:
 %
 \begin{equation}
 x=\left[\begin{array}{c}
 x_{1}\\ 
 x_{2}
 \end{array}  \right]=\left[\begin{array}{c}
 \theta \\ 
 \dot{\theta}
 \end{array}  \right]
 \end{equation}
  %
  oraz przyjmuj¹c, ¿e wejœciami do uk³adu s¹ sygna³y steruj¹ce $\tau$ , natomiast wyjœciami
  po³o¿enia k¹towe $\theta$ , równanie dynamiki (\ref{eq:10}) mo¿na wyraziæ w przestrzeni zmiennych
  stanu jako
  %
   \begin{equation}\label{eq:21}
  \begin{array}{l}
  \dot{x}=\left[\begin{array}{c}
  x_{2}\\ 
  -M^{-1}(\theta)[V(\theta, \dot{\theta})+G(\theta)]
  \end{array}  \right]+\left[\begin{array}{c}
  0 \\ 
  M^{-1}(\theta)
  \end{array}  \right]\tau
  \\
  y=\left[I \quad 0 \right]x
  \end{array}
  \end{equation}
  %
  Stosuj¹c standardowe oznaczenia modeli stanu, uk³ad rówañ (\ref{eq:21}) zapisuje siê nastêpuj¹co
  %
  \begin{equation}\label{eq:22}
  \begin{array}{l}
  \dot{x}=A(x)+B(x)\tau
  \\
  y=Cx
  \end{array}
  \end{equation}
  gdzie:
  \begin{equation}\label{eq:23}
  A(x)=\left[\begin{array}{c}
  x_{2}\\ 
  -M^{-1}(\theta)[V(\theta, \dot{\theta})+G(\theta)]
  \end{array}  \right]
  \end{equation}
  %
  \begin{equation}\label{eq:24}
  B(x)=\left[\begin{array}{c}
  0 \\ 
  M^{-1}(\theta)
  \end{array}  \right]
  \end{equation}
  %
   \begin{equation}\label{eq:24}
  C(x)=\left[I \quad 0 \right]
  \end{equation}
  %
  Charakterystycznymi w³aœciwoœciami robota jako obiektu sterowania s¹ nieliniowoœci
  wynikaj¹ce z istnienia si³ Coriolisa i si³ odœrodkowych, zmiennoœæ parametrów uk³adu w
  czasie, oraz sprzê¿enia pomiêdzy wszystkimi stopniami swobody.
  \section{Identyfikacja parametrów kinematycznych i dynamicznych robotów.
  }
  \section{Zastosowanie kwaternionów.}
  
  \section{Otwarte i zamkniête ³añcuchy kinematyczne.}
  
  \section{Uk³ady niedosterowane.}
  %
  Uk³ady niedosterowane (ang. \textit{underactuated systems}) nale¿¹ do szerokiej klasy urz¹dzeñ i systemów wystêpuj¹cych w robotyce oraz teorii sterowania. W ogólnoœci przez \textbf{uk³ady niedosterowane} rozumie siê systemy, w których liczba mo¿liwych wymuszeñ (wejœæ uk³adu) jest mniejsza od liczby stopni swobody (wyjœæ uk³adu). W przypadku uk³adów sterowania, omawiane zagadnienie sprowadza siê do procesów, w których liczba sterowanych wyjœæ jest mniejsza od liczby dostêpnych sygna³ów steruj¹cych. 
  
  Uk³ady niedosterowane w teorii sterowania s¹ interesuj¹ce ze wzglêdu na swoje w³asnoœci. Niedobór elementów wykonawczych powoduje, ¿e generowane sterowania dzia³aj¹ jednoczeœnie na kilka wyjœæ i nie ma mo¿liwoœci na niezale¿ne wp³ywanie na ka¿de z nich. 
  
  W efekcie algorytm regulacji kontroluj¹cy takie urz¹dzenie musi uwzglêdniaæ wiele wymagañ naraz i wybieraæ rozwi¹zanie dla zadanej sytuacji. 
  Badania takich uk³adów by³y prowadzone miêdzy innymi w zakresie wykorzystania teorii chaosu do sterowania niedosterowanym systemem satelitów \cite{pang:2015}, sterowania œlizgowego nieliniowymi uk³adami niedosterowanymi \cite{khan:2015} lub u¿ycia adaptacyjnego modelu z predykcj¹ 
  do sterowania robotem i minimalizacji zu¿ycia energii \cite{ahmad:2016}.
  Jednym z najprostszych urz¹dzeñ niedosterowanych jest wahad³o odwrócone. Konstrukcja wahad³a pozwala na niezale¿ny ruch wzd³u¿ osi prowadnicy, na której jest zamontowane oraz obrót wokó³ w³asnej osi. Pomimo prostej konstrukcji wahad³o odwrócone jest uk³adem czêsto wykorzystywanym w celu testowania ró¿nego rodzaju algorytmów regulacji. 
  
  Ze wzglêdu na swoj¹ budowê, wahad³o posiada chwiejny punkt równowagi w pozycji pionowej, którego opuszczenie powoduje utratê stabilnoœci i upadek do stabilnej pozycji dolnej. Pomimo prostego opisu matematycznego jego zachowañ, jest to obiekt nieliniowy, dla którego realizacja sterowania nie jest prosta.
  %
  \section{Uk³ady nieholonomiczne.}
  \section{Kolizje.}
  %-----
